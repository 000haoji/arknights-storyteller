# 人物档案与模组文本分析报告

## 🔍 发现的额外文本内容

通过全面检查 `gamedata/excel/` 目录，发现了以下**包含大量文本内容**的数据源：

### 1. **干员档案** 📖 (handbook_info_table.json)

**数据量**：覆盖所有干员（400+）

**包含内容**：
- **基础档案**：代号、性别、战斗经验、出身地、生日、种族、身高、矿石病感染情况
- **综合体检测试**：物理强度、战场机动、生理耐受、战术规划、战斗技巧、源石技艺适应性
- **客观履历**：干员背景简介
- **临床诊断分析**：体细胞与源石融合率、血液源石结晶密度
- **档案资料一/二/三/四**：详细背景故事（需要好感度解锁）
- **晋升记录1/2**：晋升后的故事更新
- **模组文字资料**：模组相关的剧情文本

**示例**（麦哲伦 - 档案资料四）：
```
第一次无尽冰原探险，距最近科考观测站二十五天路程：
我刚刚从雪地里挖出来了一根树枝。
具体数据附在数据表里，简单形容一下的话，大概和我手臂差不多长。
能够确定它的硅化过程持续了非常久，现在我手上的这一支，
在完全硅化前至少被分解了90%。
这样想的话，它原本该是多粗一根枝条呀！...
```

**解锁条件**：
- `"unLockType": "DIRECT"` - 直接解锁
- `"unLockType": "FAVOR"` - 需要好感度（25/50/100/200）
- `"unLockType": "AWAKE"` - 需要精英化

### 2. **干员语音** 🎤 (charword_table.json)

**数据量**：覆盖所有干员，每个干员30-50条语音

**包含内容**：
- 任命助理
- 交谈 1/2/3
- 晋升后交谈 1/2
- 信赖提升后交谈 1/2/3
- 闲置
- 干员报到
- 观看作战记录
- 精英化晋升 1/2
- 编入队伍
- 任命队长
- 行动出发
- 行动开始
- 选中干员 1/2
- 部署 1/2
- 作战中 1/2/3/4
- 4星结束行动
- 3星结束行动
- 非3星结束行动
- 行动失败
- 进驻设施
- 戳一下
- 信赖触摸
- 问候
- 标题

**示例**（德克萨斯）：
```
"任命助理": "我接下来的任务是保护博士你的安全。"
"交谈1": "我的话不多？实际上，我对大多数事情都没什么感想。"
"交谈2": "我们的工作是搬运生命和死亡。"
"交谈3": "开车的时候我一般会听"空"她自己录的歌。"
```

### 3. **模组介绍** ⚙️ (uniequip_table.json)

**数据量**：400+ 模组

**包含内容**：
- **uniEquipName**: 模组名称（如"麦哲伦证章"）
- **uniEquipDesc**: 模组描述（包含剧情文本）

**示例**（麦哲伦模组）：
```
干员麦哲伦擅长操纵自行研发无人机模块参加作战
根据外勤部门决议
在外勤任务中划分为辅助干员，行使召唤师职责
特别颁发此证章
以兹证明
```

### 4. **其他相关表**

| 文件名 | 用途 | 包含文本 |
|--------|------|----------|
| `character_table.json` | 干员基础数据 | 干员名称、描述、技能说明 |
| `skill_table.json` | 技能数据 | 技能名称、描述 |
| `item_table.json` | 物品数据 | 物品名称、描述 |
| `handbook_team_table.json` | 干员小队信息 | 小队背景故事 |
| `enemy_handbook_table.json` | 敌人档案 | 敌人背景故事 |

## 📊 文本量估算

| 类别 | 文件数/条目数 | 文本量 |
|------|--------------|--------|
| 干员档案 | 400+ 干员 × 8-10条 | ~4000条档案 |
| 干员语音 | 400+ 干员 × 40条 | ~16000条语音 |
| 模组介绍 | 400+ 模组 | ~400条描述 |
| **总计** | **~20000条文本** | **巨量** |

## 💭 是否需要添加？

### ✅ **建议添加的理由**

1. **内容价值高**
   - 档案包含丰富的角色背景故事
   - 是玩家了解角色的重要途径
   - 模组描述包含剧情信息

2. **用户需求强**
   - 玩家经常需要查阅干员档案
   - 离线查看干员信息的需求

3. **已有基础**
   - 现有的剧情系统可以复用
   - 数据结构清晰，易于解析

### ⚠️ **需要考虑的挑战**

1. **数据量巨大**
   - 20000+ 条文本
   - 可能影响应用性能和大小

2. **功能范围**
   - 这是"剧情阅读器"还是"游戏资料库"？
   - 需要明确产品定位

3. **UI设计**
   - 需要设计专门的干员档案查看界面
   - 按职业/阵营分类
   - 搜索和筛选功能

## 🎯 推荐方案

### 方案A：完整添加（推荐）

**优点**：
- 提供完整的游戏文本查阅体验
- 满足玩家的资料查询需求
- 差异化竞争优势

**实现**：
1. 新增"干员"标签页
2. 按职业/稀有度/阵营分类
3. 展示档案和语音
4. 支持搜索干员名

### 方案B：仅添加档案故事

**优点**：
- 数据量可控（~4000条）
- 聚焦在"故事"而非"资料"

**实现**：
1. 只解析 `storyTitle` 包含"档案资料"的条目
2. 归入"干员密录"分类
3. 不包含语音和模组

### 方案C：暂不添加

**理由**：
- 保持应用轻量
- 聚焦剧情阅读功能

## 💡 快速原型代码

如果要实现方案A，核心代码：

```rust
// data_service.rs
pub fn get_character_handbooks(&self) -> Result<HashMap<String, CharacterHandbook>, String> {
    let handbook_file = self.data_dir.join("zh_CN/gamedata/excel/handbook_info_table.json");
    let content = fs::read_to_string(&handbook_file)?;
    let data: Value = serde_json::from_str(&content)?;
    
    let handbookDict = data.get("handbookDict").and_then(|v| v.as_object())?;
    // 解析每个干员的档案...
}
```

## 🎲 决策建议

**当前阶段**：
建议先**完成主线笔记和肉鸽的修复**，确保这些核心功能稳定后，再考虑是否添加干员档案。

**长期规划**：
干员档案是非常有价值的内容，建议作为**下一个大版本功能**添加。

---

*分析时间：2025-10-16*
*下一步：修复主线笔记加载问题*

