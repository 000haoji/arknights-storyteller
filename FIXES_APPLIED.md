# ä¿®å¤è¯´æ˜ - è‚‰é¸½æ ‡é¢˜å’Œä¸»çº¿ç¬”è®°

## ğŸ”§ å·²åº”ç”¨çš„ä¿®å¤

### 1. **è‚‰é¸½å‹å¥½æ ‡é¢˜æå–**

**é—®é¢˜**ï¼šè‚‰é¸½å‰§æƒ…æ˜¾ç¤ºçš„æ˜¯ `month_chat_rogue_1_1_1` è¿™æ ·çš„è‹±æ–‡æ–‡ä»¶å

**ä¿®å¤**ï¼š
- ä» `roguelike_topic_table.json` ä¸­æå– `endbookName`ï¼ˆç»ˆç« åç§°ï¼‰
- æå– `chatDesc`ï¼ˆæœˆåº¦èŠå¤©æè¿°ï¼‰
- æå– `title`ï¼ˆå…¶ä»–æ ‡é¢˜å­—æ®µï¼‰
- ä»£ç ä½ç½®ï¼š`data_service.rs:2075-2133`

**æ•ˆæœ**ï¼š
- `endbook_rogue_2_1_1` â†’ **"åå­—è·¯å£"**
- `endbook_rogue_2_1_2` â†’ **"çªƒå–ç¥è¿¹"**
- `endbook_rogue_2_1_3` â†’ **"æ¯èä¹‹å£°"**
- æœˆåº¦èŠå¤©æ ¹æ®æ¥¼å±‚æ˜¾ç¤ºå‹å¥½æ ‡é¢˜

### 2. **ä¸»çº¿ç¬”è®°è·¯å¾„ä¿®å¤**

**é—®é¢˜**ï¼šç‚¹å‡»ä¸»çº¿ç¬”è®°åæ˜¾ç¤º"åŠ è½½å¤±è´¥"

**åŸå› **ï¼š
- `zone_table.json` ä¸­çš„è·¯å¾„æ˜¯ `Obt/Record/main_10/text_main_10_note_1`
- æ–‡ä»¶ç³»ç»Ÿå®é™…è·¯å¾„æ˜¯ `obt/record/main_10/text_main_10_note_1.txt`
- éœ€è¦è·¯å¾„è§„èŒƒåŒ–

**ä¿®å¤**ï¼š
- æ·»åŠ è·¯å¾„è§„èŒƒåŒ–ï¼š`.to_ascii_lowercase()`
- ä»£ç ä½ç½®ï¼š`data_service.rs:2390-2393`

**æ•ˆæœ**ï¼š
- ç°åœ¨å¯ä»¥æ­£ç¡®åŠ è½½æ‰€æœ‰ä¸»çº¿ç¬”è®°
- æ˜¾ç¤ºå‹å¥½æ ‡é¢˜ï¼š`ç¬”è®° 10-2`, `ç¬”è®° 11-5` ç­‰

### 3. **æ•°æ®æºæ•´åˆ**

ä¿®æ”¹ä» 3 ä¸ªæ•°æ®æºæå–è‚‰é¸½ä¿¡æ¯ï¼š

| æ•°æ®æº | ç”¨é€” | æå–å†…å®¹ |
|--------|------|---------|
| `story_review_meta_table.json` | metaä¿¡æ¯ | contentPath æ˜ å°„ |
| `story_table.json` | roguelikeå…³å¡ | ro1-ro5 çš„å…³å¡å‰§æƒ… |
| `roguelike_topic_table.json` | **rogueå‰§æƒ…** | æœˆåº¦èŠå¤©ã€ç»ˆç« ã€æŒ‘æˆ˜ + å‹å¥½æ ‡é¢˜ |

## ğŸ“ å…³é”®ä»£ç ä¿®æ”¹

### æ ‡é¢˜æå–é€»è¾‘ï¼ˆdata_service.rs:2096-2102ï¼‰
```rust
// æå–æ ‡é¢˜
if let Some(name) = obj.get("endbookName").and_then(|v| v.as_str()) {
    title = Some(name.to_string());
} else if let Some(name) = obj.get("chatDesc").and_then(|v| v.as_str()) {
    title = Some(name.to_string());
} else if let Some(name) = obj.get("title").and_then(|v| v.as_str()) {
    title = Some(name.to_string());
}
```

### ä¼˜å…ˆçº§ç­–ç•¥ï¼ˆdata_service.rs:2242-2247ï¼‰
```rust
let name = explicit_title
    .filter(|s| !s.trim().is_empty())
    .or_else(|| path_desc_map.get(&lower).cloned())
    .unwrap_or_else(|| {
        story_id.split('/').last().unwrap_or(&story_id).to_string()
    });
```

## âœ… ç¼–è¯‘çŠ¶æ€

- âœ… Ruståç«¯ï¼šç¼–è¯‘é€šè¿‡
- âœ… TypeScriptå‰ç«¯ï¼šç±»å‹æ£€æŸ¥é€šè¿‡  
- âœ… Linterï¼šæ— é”™è¯¯

## ğŸš€ æµ‹è¯•å»ºè®®

1. é‡æ–°ç¼–è¯‘åº”ç”¨
2. åŒæ­¥æ•°æ®
3. è¿›å…¥"è‚‰é¸½"åˆ†ç±»ï¼Œåº”è¯¥çœ‹åˆ°ï¼š
   - å‹å¥½çš„ä¸­æ–‡æ ‡é¢˜ä»£æ›¿æ–‡ä»¶å
   - ä¾‹å¦‚"åå­—è·¯å£"è€Œä¸æ˜¯"endbook_rogue_2_1_1"
4. è¿›å…¥"ä¸»çº¿ç¬”è®°"ï¼Œåº”è¯¥èƒ½æ­£å¸¸åŠ è½½
5. ç‚¹å‡»"è®¾ç½®" â†’ "é‡å»ºå‰§æƒ…ç´¢å¼•"ä»¥æ›´æ–°æœç´¢

---
*ä¿®å¤æ—¶é—´ï¼š2025-10-16*

